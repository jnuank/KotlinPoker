/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package KotlinPoker

import org.assertj.core.api.Assertions.*
import org.junit.Before
import org.junit.Test

class AppTest {
    @Test fun testクラブの3が生成されること(){
        Card("♣", "3").let{
            assertThat(it.toString()).isEqualTo("3♣")
        }
    }

    class CardComparisonTest{
        val spadeThree = Card("♠", "3")
        val aceOfSpades = Card("♠", "A")
        val aceOfHearts = Card("♥", "A")
        @Test fun testスペードの3とスペードのAは同じスートを持つこと(){
            spadeThree.let{
                assertThat(it.hasSameSuit(aceOfSpades))
                .isTrue()
            }
        }
        @Test fun testスペードの3とハートのAは異なるスートを持つこと(){
            spadeThree.let{
                assertThat(it.hasSameSuit(aceOfHearts))
                .isFalse()
            }
        }
        @Test fun testスペードの3とスペードのAは異なるランクを持つこと(){
            spadeThree.let{
                assertThat(it.hasSameRank(aceOfHearts))
                .isFalse()
            }
        }
        @Test fun testスペードのAとハートのAは同じランクを持つ(){
            aceOfSpades.let{
                assertThat(it.hasSameRank(aceOfHearts))
                .isTrue()
            }
        }
    }

    // 課題2
    class TwoCardPorker{
        @Test fun testペアと判定されること(){
            val card1 = Card("◆", "9")
            val card2 = Card("◆", "9")
            val cards = Cards(mutableListOf(card1, card2))
            
            cards.let{
                assertThat(it.isPair())
                .isTrue()
            }            
        }
        @Test fun testペアではないこと(){
            val kingOfDia = Card("◆", "K")
            val twoOfHeart = Card("♥", "2")
            val cards = Cards(mutableListOf(kingOfDia, twoOfHeart))
            cards.let{
                assertThat(it.isPair())
                .isFalse()
            }
        }
        @Test fun testフラッシュではないこと(){
            val kingOfDia = Card("◆", "K")
            val twoOfHeart = Card("♥", "2")
            val cards = Cards(mutableListOf(kingOfDia, twoOfHeart))
            cards.let{
                assertThat(it.isFlush())
                .isFalse()
            }
        }
        @Test fun testフラッシュであること(){
            val kingOfDia = Card("◆", "K")
            val nineOfDia = Card("◆", "9")
            val cards = Cards(mutableListOf(kingOfDia, nineOfDia))
            cards.let{
                assertThat(it.isFlush())
                .isTrue()
            }            
        }
        // ハイカード=ブタ
        @Test fun testハイカードであること(){
            val card1 = Card("♣", "4")
            val card2 = Card("◆", "9")
            val cards = Cards(mutableListOf(card1, card2))
            
            cards.let{
                assertThat(it.isHighCard())
                .isTrue()
            }            
        }
        @Test fun testハイカードでないこと(){
            val card1 = Card("◆", "4")
            val card2 = Card("◆", "9")
            val cards = Cards(mutableListOf(card1, card2))
            
            cards.let{
                assertThat(it.isHighCard())
                .isFalse()
            }

            val card3 = Card("♠", "4")
            val cardsOther = Cards(mutableListOf(card1,card3))

            cardsOther.let{
                assertThat(it.isHighCard())
                .isFalse()
            }            
        }
    }
}
